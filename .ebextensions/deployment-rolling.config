option_settings:
  aws:elasticbeanstalk:command:
    DeploymentPolicy: Rolling
    BatchSizeType: Fixed
    BatchSize: 1          # Update 1 instance at a time to maintain 2 healthy instances
    Timeout: 600
    IgnoreHealthCheck: false

  aws:autoscaling:asg:
    MinSize: 3
    MaxSize: 6
    Cooldown: 360

  aws:autoscaling:updatepolicy:rollingupdate:
    RollingUpdateEnabled: true
    MaxBatchSize: 1
    MinInstancesInService: 2
    PauseTime: PT1M       # Wait 1 minute between batches