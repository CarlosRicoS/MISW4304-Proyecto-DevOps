option_settings:
  # Auto Scaling Configuration
  
  aws:autoscaling:asg:
    MinSize: 3
    MaxSize: 6
    Cooldown: 360  # 6 minutes
    
  aws:autoscaling:trigger:
    # CPU-based scaling
    MeasureName: CPUUtilization
    Statistic: Average
    Unit: Percent
    Period: 5
    BreachDuration: 5
    EvaluationPeriods: 1
    
    # Scale up when CPU > 80%
    UpperThreshold: 80
    UpperBreachScaleIncrement: 1
    
    # Scale down when CPU < 20%
    LowerThreshold: 20
    LowerBreachScaleIncrement: -1
    
  aws:autoscaling:updatepolicy:rollingupdate:
    RollingUpdateEnabled: true
    MaxBatchSize: 1
    MinInstancesInService: 3
    RollingUpdateType: Health
    Timeout: PT30M
    PauseTime: PT1M
    
  # Instance refresh settings
  aws:elasticbeanstalk:managedactions:
    ManagedActionsEnabled: true
    PreferredStartTime: "Sun:10:00"  # Sunday 10 AM UTC
    
  aws:elasticbeanstalk:managedactions:platformupdate:
    UpdateLevel: minor
    InstanceRefreshEnabled: true

